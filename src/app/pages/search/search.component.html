<div>
    <form (ngSubmit)="handleSearch()">
            <mat-form-field appearance="outline" [hideRequiredMarker]="hideRequiredControl.value"
                [floatLabel]="floatLabelControl.value">
                <mat-icon matPrefix>search</mat-icon>
                <input matInput placeholder="Enter name, brand, manufacturer to search" [(ngModel)]="keyword" name="keyword" />
            </mat-form-field>
    </form>
</div>

<mat-card class="main-content">
    <mat-card-header>
        <!-- <mat-card-title>Products List</mat-card-title> -->
    </mat-card-header>
    <mat-card-content>

        <table mat-table [dataSource]="allProducts" multiTemplateDataRows class="mat-elevation-z8">
            <ng-container matColumnDef="productId">
                <th mat-header-cell *matHeaderCellDef> Product ID </th>
                <td mat-cell *matCellDef="let product"> {{product.productId}} </td>
            </ng-container>
            
            <ng-container matColumnDef="brand">
                <th mat-header-cell *matHeaderCellDef> Brand </th>
                <td mat-cell *matCellDef="let product"> {{product.brand}} </td>
            </ng-container>

            <ng-container matColumnDef="category">
                <th mat-header-cell *matHeaderCellDef> Category </th>
                <td mat-cell *matCellDef="let product"> {{product.category}} </td>
            </ng-container>

            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Name </th>
                <td mat-cell *matCellDef="let product"> {{product.name}} </td>
            </ng-container>
            
            <ng-container matColumnDef="price">
                <th mat-header-cell *matHeaderCellDef> Price </th>
                <td mat-cell *matCellDef="let product"> $ {{product.price}} </td>
            </ng-container>
            
            <ng-container matColumnDef="quantities">
                <th mat-header-cell *matHeaderCellDef> Quantities </th>
                <td mat-cell *matCellDef="let product"> {{product.quantities}} </td>
            </ng-container>
            
            <ng-container matColumnDef="onSale">
                <th mat-header-cell *matHeaderCellDef> On Sale </th>
                <td mat-cell *matCellDef="let product"> {{product.onSale}} </td>
            </ng-container>
            
            <ng-container matColumnDef="location">
                <th mat-header-cell *matHeaderCellDef> Location </th>
                <td mat-cell *matCellDef="let product"> {{product.location}} </td>
            </ng-container>
            
            <ng-container matColumnDef="cost">
                <th mat-header-cell *matHeaderCellDef> Cost </th>
                <td mat-cell *matCellDef="let product"> $ {{product.cost}} </td>
            </ng-container>
            
            <ng-container matColumnDef="batches">
                <th mat-header-cell *matHeaderCellDef> Batches Count </th>
                <td mat-cell *matCellDef="let product"> {{product.batches.length}} </td>
            </ng-container>
        
            <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
            <ng-container matColumnDef="expandedDetail">
                <td mat-cell *matCellDef="let product" [attr.colspan]="displayedColumns.length">
                    <div class="element-detail" [@detailExpand]="product == expandedProduct ? 'expanded' : 'collapsed'">
                        <mat-tab-group mat-align-tabs="center" dynamicHeight>
                            <mat-tab label="Edit Product">
                                <div class="example-large-box mat-elevation-z4">
                                    <app-product-detail [selectedProduct]="product" [allCategories]="allCategories"></app-product-detail>
                                </div>
                            </mat-tab>
                            <mat-tab label="Batches">
                                <div class="example-large-box mat-elevation-z4">
                                    <!-- <app-associated-batches [allBatches]="expandedProduct.batches" [associatedProduct]="expandedProduct"></app-associated-batches> -->
                                </div>
                            </mat-tab>
                        </mat-tab-group>
                    </div>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let product; columns: displayedColumns;" class="element-row"
                [class.expanded-row]="expandedProduct === product"
                (click)="setExpandedProduct(product)">
            </tr>
            <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="detail-row"></tr>
        </table>
    </mat-card-content>
    <!-- <mat-card-actions>
        <button mat-button>LIKE</button>
        <button mat-button>SHARE</button>
    </mat-card-actions> -->
</mat-card>

<router-outlet></router-outlet>